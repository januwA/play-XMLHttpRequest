<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button class="get">get String</button>
    <br>
    <button class="getj">get Json</button>
    <br>
    <button class="post">post</button>
    <script src="./ajax.js"></script>
    <script>
        const l = console.log;
        ajanuw.create({
            headers: {
                'content-type': 'application/x-www-form-urlencoded'
            }
        })

        document.querySelector('.get').addEventListener('click', async function (e) {
            let q = {name: 'ajanuw', age: 14}
            let res = await ajanuw.get('http://localhost:3000/test/text?name=asd&xxx=xml', {
                tfres(data) {
                    return data + "...hello ajanuw";
                }
            });

            l(res)
        })


        document.querySelector('.getj').addEventListener('click', async function (e) {
            let res = await ajanuw.get('http://localhost:3000/test/json?hello=json', {
                body: {
                    name: 'ajanuw get json',
                    age: 12
                },
            });

            l(res)
        })


        document.querySelector('.post').addEventListener('click', async function (e) {
            let res = await ajanuw.post('http://localhost:3000/test/create?post=ajanw', {
                body: {
                    name: 'ajanuw post',
                    age: 122
                },
                tfres(data) {
                    return data;
                    // return JSON.parse(data);
                }
            });

            l(res)
        })
    </script>
</body>

</html>